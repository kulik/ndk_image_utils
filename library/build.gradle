buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:0.+'
    }
}
apply plugin: 'android-library'

repositories {
    mavenCentral()
}

android {
    compileSdkVersion 18
    buildToolsVersion "18.1.1"

    defaultConfig {
        minSdkVersion 8
        targetSdkVersion 16
    }

    tasks.withType(com.android.build.gradle.tasks.PackageApplication) {
        pkgTask -> pkgTask.jniDir new File(projectDir, 'libs')
    }


    task nativeLibsToJar(type: Zip, description: 'create a jar archive of the native libs') {
        destinationDir file("libs")
        baseName 'native-libs'
        extension 'jar'
        from fileTree(dir: 'libs', include: '**/*.so')
        into 'lib/'
    }

 
//    nativeLibsToJar   tasks.withType(Compile) {
//        compileTask -> compileTask.dependsOn(nativeLibsToJar)
//    }

    task ndkBuild(type:Exec) {
        commandLine 'ndk-build'
	nativeLibsToJar
    }

//    tasks.withType(Compile) {
//        compileTask -> compileTask.dependsOn ndkBuild
//    }

//    release {
//        runProguard true
//        proguardFile 'proguard-rules.txt'
//        proguardFile getDefaultProguardFile('proguard-android-optimize.txt')
//    }
    dependencies {
        compile files('libs/native-libs.jar')
//        compile fileTree(dir: "$buildDir/libs", include: '**/*.so')
    }
}

